<html>
	<head>
		<style>
		.container {
		  margin: 1vw;
		  width: 46vw;
		  height: 50vh;
		  font-size: 24px;
		}
		</style>
		<script type="text/javascript" src="/conIME/rep2.js"></script>
		<script type="text/javascript">
		window.onload = function() {
			class OrthographyRef {
				constructor() {
					this.ipa = {
							o:{"s":13,"z":10,"ts":4,"dz":8,"l":5,"n":2,"t":16,"d":3,"ɾ":5,"m":6,"p":17,"b":7,"j":11,"ç":18,"f":17,"v":7,"ʃ":9,"ʒ":9,"tʃ":12,"dʒ":14,"k":15,"g":0,"w":11, "": 11},
							n:{"u":18,"i":20,"ʌ":1,"ɛ":4,"o":8,"e":5,"a":0,"ji":19,"wi":16,"ju":13,"wu":17,"je":7,"we":15,"jo":12,"wo":11,"jɛ":6,"wɛ":14,"jʌ":3,"wʌ":10,"ja":2,"wa":9},
							c:{"s":19,"z":20,"l":8,"n":4,"t":25,"d":7,"m":16,"p":26,"b":17,"ç":27,"f":14,"v":18,"tʃ":22,"dʒ":23,"k":24,"g":1,"":0,"q":21},
							s:{"m":12609,"n":12596,"p":12621,"f":12607,"b":12610,"v":12612,"t":12620,"d":12599,"k":12619,"g":12593,"s":12613,"z":12614,"l":12617,"tʃ":12616,"dʒ":12618,"ç":12622}
						};
					this.gen = {
							o:{"s":13,"z":10,"ts":4,"dz":8,"l":5,"n":2,"t":16,"d":3,"r":5,"m":6,"p":17,"b":7,"j":11,"c":18,"f":17,"v":7,"sh":9,"zh":9,"ch":12,"dj":14,"k":15,"g":0,"w":11, "": 11},
							n:{"u":18,"i":20,"ù":1,"è":4,"o":8,"e":5,"a":0,"ji":19,"wi":16,"ju":13,"wu":17,"je":7,"we":15,"jo":12,"wo":11,"jè":6,"wè":14,"jù":3,"wù":10,"ja":2,"wa":9},
							c:{"s":19,"z":20,"l":8,"n":4,"t":25,"d":7,"m":16,"p":26,"b":17,"c":27,"f":14,"v":18,"ch":22,"dj":23,"k":24,"g":1,"":0,"q":21},
							s:{"m":12609,"n":12596,"p":12621,"f":12607,"b":12610,"v":12612,"t":12620,"d":12599,"k":12619,"g":12593,"s":12613,"z":12614,"l":12617,"ch":12616,"dj":12618,"c":12622}
						};
				}
			}
			rep = {};
			var o = new OrthographyRef();
			for(var i in o.gen.o) {
			  for(var j in o.gen.n) {
				for(var k in o.gen.c) {
				  var sylStr = i+j+k;
				  var syl = String.fromCharCode(((o.gen.o[i]*588) + (o.gen.n[j]*28) + o.gen.c[k]) + 44032)
				  rep[sylStr] = syl;
				}
			  }
			}
			for(var i in o.gen.s) {
			  var s = i + " "
			  rep[s] = String.fromCharCode(o.gen.s[i])
			}
		
			var text = document.getElementById("userIn");
			var out = document.getElementById("userOut");
			text.addEventListener('keyup', (event) => {
			  var val = text.value;
			  val = val.replace(/eh/g, "\u00e8");
			  val = val.replace(/uh/g, "\u00f9");
			  text.value = val;
			  /*for(r in rep) {
				var re = new RegExp(r, 'g');
				val = text.value.replace(re, rep[r]);
				out.value = val;
			  }*/
			  out.value = roCon(text.value);
			}, false);
		}
		</script>
	</head>
	<body>
		<textarea id="userIn" class="container"></textarea>
		<textarea id="userOut" class="container" readonly></textarea>
	</body>
</html>
